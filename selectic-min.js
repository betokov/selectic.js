window.Selectic = function () { return function (e) { let t = document.querySelector(e); if (!t) return console.log("Uncaught Error: `" + e + "`element not found"); let c = t.previousElementSibling ? t.previousElementSibling : t.parentElement; t.classList.add("selectic-hide"), t.setAttribute("tabindex", "-1"), function () { let e = document.createElement("div"); e.classList.add("selectic"), t.previousElementSibling ? t.parentElement.insertBefore(e, c.nextSibling) : t.parentElement.prepend(e), e.append(t), function () { let e = t.querySelectorAll("option"), c = { val: [], attr: [] }; e.forEach(e => { c.val.push(e.innerHTML), c.attr.push(e.attributes) }), function (e) { let c = document.createElement("div"), l = document.createElement("div"); l.classList.add("selectic__list"), c.classList.add("selectic__wrapper"), c.append(l); for (let t of e.val) { let e = document.createElement("div"); e.classList.add("selectic__item"), e.innerHTML = t, l.append(e) } let s = l.querySelectorAll(".selectic__item"), i = 0; for (let t = 0; t < e.attr.length; t++)for (let c = 0; c < e.attr[t].length; c++)"selected" == e.attr[t][c].nodeName && (s[t].classList.add("selectic__item_selected"), i += 1), "disabled" == e.attr[t][c].nodeName && s[t].classList.add("selectic__item_disabled"); 0 == i && s[0].classList.add("selectic__item_selected"); let n = document.createElement("span"), a = document.createElement("div"), r = document.createElement("span"); a.classList.add("selectic__label-box"), r.classList.add("selectic__button"), n.classList.add("selectic__label"), n.innerHTML = l.querySelector(".selectic__item_selected").innerHTML, a.append(n), a.append(r), c.prepend(a), t.parentElement.append(c), function (e) { let t = e.querySelector(".selectic__label"), c = e.querySelector(".selectic__button"), l = e.querySelector(".selectic__list"), s = e.querySelectorAll(".selectic__item"); t.addEventListener("click", function () { l.classList.toggle("selectic__list_show") }), c.addEventListener("click", function () { l.classList.toggle("selectic__list_show") }), s.forEach(e => { e.classList.contains("selectic__item_disabled") && e.classList.contains("selectic__item_selected") || e.addEventListener("click", function () { s.forEach(e => { e.classList.remove("selectic__item_selected") }), t.innerHTML = e.innerHTML, e.classList.add("selectic__item_selected"), l.classList.remove("selectic__list_show") }) }), document.addEventListener("click", t => { let c = t.target; e.contains(c) || e.querySelector(".selectic__list").classList.contains("selectic__list_show") && e.querySelector(".selectic__list").classList.remove("selectic__list_show") }) }(c) }(c) }() }() } }();